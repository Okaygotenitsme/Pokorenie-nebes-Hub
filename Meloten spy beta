-- Ultimate Dev Console
-- Place this LocalScript in StarterPlayerScripts

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local lp = Players.LocalPlayer
local char = lp.Character or lp.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "UltimateDevConsole"
gui.ResetOnSpawn = false
gui.Parent = CoreGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 480, 0, 350)
mainFrame.Position = UDim2.new(0, 50, 0, 100)
mainFrame.BackgroundColor3 = Color3.fromRGB(28,28,28)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0,12)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1,0,0,36)
title.BackgroundTransparency = 1
title.Text = "üõ†Ô∏è Ultimate Dev Console"
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Parent = mainFrame

-- Dragging
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
	local delta = input.Position - dragStart
	mainFrame.Position = UDim2.new(0, startPos.X + delta.X, 0, startPos.Y + delta.Y)
end

title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = mainFrame.AbsolutePosition

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

title.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input == dragInput then
		update(input)
	end
end)

-- Tabs container
local tabsFrame = Instance.new("Frame")
tabsFrame.Size = UDim2.new(1,0,1,-36)
tabsFrame.Position = UDim2.new(0,0,0,36)
tabsFrame.BackgroundTransparency = 1
tabsFrame.Parent = mainFrame

local tabButtons = Instance.new("Frame")
tabButtons.Size = UDim2.new(1,0,0,30)
tabButtons.BackgroundTransparency = 1
tabButtons.Parent = tabsFrame

local tabLayout = Instance.new("UIListLayout")
tabLayout.FillDirection = Enum.FillDirection.Horizontal
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
tabLayout.Padding = UDim.new(0,6)
tabLayout.Parent = tabButtons

local function makeTabButton(name)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,120,1,0)
	btn.Text = name
	btn.BackgroundColor3 = Color3.fromRGB(50,50,50)
	btn.TextColor3 = Color3.fromRGB(255,255,255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 14
	btn.AutoButtonColor = true
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
	btn.Parent = tabButtons
	return btn
end

local animTabBtn = makeTabButton("Animation Spy")
local remoteTabBtn = makeTabButton("Remote Spy")

-- Pages
local pages = {}

-- -----------------------------
-- Animation Spy Page
-- -----------------------------
local animPage = Instance.new("Frame")
animPage.Size = UDim2.new(1,0,1,-30)
animPage.Position = UDim2.new(0,0,0,30)
animPage.BackgroundTransparency = 1
animPage.Visible = true
animPage.Parent = tabsFrame
pages["Animation Spy"] = animPage

-- Scroll for animations
local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.new(1,-20,1,-20)
scroll.Position = UDim2.new(0,10,0,10)
scroll.BackgroundTransparency = 1
scroll.BorderSizePixel = 0
scroll.CanvasSize = UDim2.new()
scroll.ScrollBarThickness = 6
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.Parent = animPage

local layout = Instance.new("UIListLayout")
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0,4)
layout.Parent = scroll

local seenAnims = {}

local function addAnimRow(name,id)
	if seenAnims[id] then return end
	seenAnims[id] = true

	local row = Instance.new("Frame")
	row.Size = UDim2.new(1,0,0,30)
	row.BackgroundColor3 = Color3.fromRGB(40,40,40)
	row.Parent = scroll
	Instance.new("UICorner", row).CornerRadius = UDim.new(0,6)

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(0.5,-4,1,0)
	label.Position = UDim2.new(0,2,0,0)
	label.BackgroundTransparency = 1
	label.Text = name
	label.TextColor3 = Color3.fromRGB(255,255,255)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = row

	local copyBtn = Instance.new("TextButton")
	copyBtn.Size = UDim2.new(0.2,-4,0.8,0)
	copyBtn.Position = UDim2.new(0.5,2,0.1,0)
	copyBtn.BackgroundColor3 = Color3.fromRGB(85,170,255)
	copyBtn.Text = "üìã"
	copyBtn.Font = Enum.Font.GothamBold
	copyBtn.TextSize = 14
	copyBtn.TextColor3 = Color3.new(1,1,1)
	copyBtn.Parent = row
	Instance.new("UICorner", copyBtn).CornerRadius = UDim.new(1,0)
	copyBtn.MouseButton1Click:Connect(function()
		setclipboard(id)
	end)

	local playBtn = Instance.new("TextButton")
	playBtn.Size = UDim2.new(0.2,-4,0.8,0)
	playBtn.Position = UDim2.new(0.7,2,0.1,0)
	playBtn.BackgroundColor3 = Color3.fromRGB(100,200,100)
	playBtn.Text = "‚ñ∂"
	playBtn.Font = Enum.Font.GothamBold
	playBtn.TextSize = 14
	playBtn.TextColor3 = Color3.new(1,1,1)
	playBtn.Parent = row
	Instance.new("UICorner", playBtn).CornerRadius = UDim.new(1,0)
	playBtn.MouseButton1Click:Connect(function()
		local anim = Instance.new("Animation")
		anim.AnimationId = id
		local track = hum:LoadAnimation(anim)
		track:Play()
	end)
end

hum.AnimationPlayed:Connect(function(track)
	local anim = track.Animation
	if anim and anim.AnimationId then
		addAnimRow(anim.Name ~= "" and anim.Name or "Animation", anim.AnimationId)
	end
end)

-- -----------------------------
-- Remote Spy Page
-- -----------------------------
local remotePage = Instance.new("Frame")
remotePage.Size = UDim2.new(1,0,1,-30)
remotePage.Position = UDim2.new(0,0,0,30)
remotePage.BackgroundTransparency = 1
remotePage.Visible = false
remotePage.Parent = tabsFrame
pages["Remote Spy"] = remotePage

local remoteScroll = Instance.new("ScrollingFrame")
remoteScroll.Size = UDim2.new(1,-20,1,-20)
remoteScroll.Position = UDim2.new(0,10,0,10)
remoteScroll.BackgroundTransparency = 1
remoteScroll.BorderSizePixel = 0
remoteScroll.ScrollBarThickness = 6
remoteScroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
remoteScroll.Parent = remotePage

local remoteLayout = Instance.new("UIListLayout")
remoteLayout.SortOrder = Enum.SortOrder.LayoutOrder
remoteLayout.Padding = UDim.new(0,4)
remoteLayout.Parent = remoteScroll

-- Simple remote spy hook
local seenRemotes = {}
local mt = getrawmetatable(game)
local oldIndex = mt.__namecall
setreadonly(mt,false)
mt.__namecall = newcclosure(function(self,...)
	local method = getnamecallmethod()
	local args = {...}
	if method == "FireServer" and typeof(self)=="Instance" and self:IsA("RemoteEvent") then
		if not seenRemotes[self] then
			seenRemotes[self] = true
			local row = Instance.new("TextLabel")
			row.Size = UDim2.new(1,0,0,30)
			row.BackgroundColor3 = Color3.fromRGB(50,50,50)
			row.TextColor3 = Color3.fromRGB(255,255,255)
			row.Text = self.Name
			row.Font = Enum.Font.Gotham
			row.TextSize = 14
			row.Parent = remoteScroll
			Instance.new("UICorner", row).CornerRadius = UDim.new(0,6)
		end
	end
	return oldIndex(self,...)
end)
setreadonly(mt,true)

-- -----------------------------
-- Tab switching
-- -----------------------------
for tabName, tabBtn in pairs({["Animation Spy"]=animTabBtn, ["Remote Spy"]=remoteTabBtn}) do
	tabBtn.MouseButton1Click:Connect(function()
		for name,page in pairs(pages) do
			page.Visible = (name == tabName)
		end
	end)
end	b.Font = Enum.Font.GothamBold
	b.TextSize = 14
	b.BorderSizePixel = 0
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,6)
	b.Parent = main
	return b
end

local hideBtn = makeBtn("Hide", Color3.fromRGB(120,120,120), 380)
local resetBtn = makeBtn("Reset", Color3.fromRGB(85,170,255), 300)
local closeBtn = makeBtn("Close", Color3.fromRGB(200,60,60), 220)

-- Tab switching
tabAnim.MouseButton1Click:Connect(function()
	scrollAnim.Visible = true
	scrollRemote.Visible = false
	tabAnim.TextColor3 = Color3.fromRGB(200,200,200)
	tabRemote.TextColor3 = Color3.fromRGB(120,120,120)
end)
tabRemote.MouseButton1Click:Connect(function()
	scrollAnim.Visible = false
	scrollRemote.Visible = true
	tabAnim.TextColor3 = Color3.fromRGB(120,120,120)
	tabRemote.TextColor3 = Color3.fromRGB(200,200,200)
end)

-- Hide / Minimize
local minimized = false
local miniBtn
hideBtn.MouseButton1Click:Connect(function()
	if minimized then
		minimized = false
		main.Size = UDim2.new(0,480,0,360)
		if miniBtn then miniBtn:Destroy() end
		return
	end
	minimized = true
	main.Size = UDim2.new(0,160,0,36)
	miniBtn = Instance.new("TextButton")
	miniBtn.Size = UDim2.new(1,0,1,0)
	miniBtn.Text = "üõ† Ultimate Dev Console"
	miniBtn.TextColor3 = Color3.new(1,1,1)
	miniBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
	miniBtn.Font = Enum.Font.GothamBold
	miniBtn.TextSize = 16
	Instance.new("UICorner", miniBtn).CornerRadius = UDim.new(0,8)
	miniBtn.Parent = main
	miniBtn.MouseButton1Click:Connect(function()
		minimized = false
		main.Size = UDim2.new(0,480,0,360)
		miniBtn:Destroy()
	end)
end)

-- Close
closeBtn.MouseButton1Click:Connect(function()
	gui:Destroy()
end)

-- Reset
resetBtn.MouseButton1Click:Connect(function()
	scrollAnim:ClearAllChildren()
	scrollRemote:ClearAllChildren()
end)

-- Animation Spy Logging (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ –±—ã–ª–æ)
local seen = {}
hum.AnimationPlayed:Connect(function(track)
	local anim = track.Animation
	if anim and anim.AnimationId and not seen[anim.AnimationId] then
		seen[anim.AnimationId] = true
		local row = Instance.new("TextLabel")
		row.Size = UDim2.new(1,0,0,28)
		row.BackgroundColor3 = Color3.fromRGB(45,45,45)
		row.TextColor3 = Color3.new(1,1,1)
		row.Text = anim.Name ~= "" and anim.Name or "Animation: " .. anim.AnimationId
		row.Font = Enum.Font.Gotham
		row.TextSize = 14
		row.TextXAlignment = Enum.TextXAlignment.Left
		row.Parent = scrollAnim
		scrollAnim.CanvasSize = UDim2.new(0,0,0,#scrollAnim:GetChildren()*32)
	end
end)
