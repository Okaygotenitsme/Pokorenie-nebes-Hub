--// Random Player Follower with GUI
-- Place in StarterPlayerScripts (LocalScript)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FollowerUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 150)
Frame.Position = UDim2.new(0.5, -125, 0.5, -75)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Frame.BackgroundTransparency = 0.2
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui

local Title = Instance.new("TextLabel")
Title.Text = "Player Follower"
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.SourceSansBold
Title.TextScaled = true
Title.Parent = Frame

local DistanceLabel = Instance.new("TextLabel")
DistanceLabel.Text = "Follow Distance:"
DistanceLabel.Size = UDim2.new(1, -20, 0, 25)
DistanceLabel.Position = UDim2.new(0, 10, 0, 35)
DistanceLabel.BackgroundTransparency = 1
DistanceLabel.TextColor3 = Color3.new(1, 1, 1)
DistanceLabel.Font = Enum.Font.SourceSans
DistanceLabel.TextScaled = true
DistanceLabel.Parent = Frame

local DistanceBox = Instance.new("TextBox")
DistanceBox.Text = "8"
DistanceBox.Size = UDim2.new(1, -20, 0, 30)
DistanceBox.Position = UDim2.new(0, 10, 0, 65)
DistanceBox.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
DistanceBox.TextColor3 = Color3.new(1, 1, 1)
DistanceBox.ClearTextOnFocus = false
DistanceBox.Font = Enum.Font.SourceSans
DistanceBox.TextScaled = true
DistanceBox.Parent = Frame

local StartButton = Instance.new("TextButton")
StartButton.Text = "Start Following"
StartButton.Size = UDim2.new(1, -20, 0, 35)
StartButton.Position = UDim2.new(0, 10, 0, 105)
StartButton.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
StartButton.TextColor3 = Color3.new(1, 1, 1)
StartButton.Font = Enum.Font.SourceSansBold
StartButton.TextScaled = true
StartButton.Parent = Frame

-- Variables
local following = false
local target = nil
local followDistance = 8
local connection

-- Function to pick a random player
local function getRandomPlayer()
	local allPlayers = Players:GetPlayers()
	local others = {}
	for _, plr in ipairs(allPlayers) do
		if plr ~= LocalPlayer then
			table.insert(others, plr)
		end
	end
	if #others == 0 then return nil end
	return others[math.random(1, #others)]
end

-- Main follow function
local function startFollowing()
	if following then return end
	target = getRandomPlayer()
	if not target then
		warn("No players to follow!")
		return
	end
	print("Following:", target.Name)
	
	following = true
	local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local root = char:WaitForChild("HumanoidRootPart")

	connection = RunService.RenderStepped:Connect(function()
		if not following or not target.Character or not target.Character:FindFirstChild("HumanoidRootPart") then return end
		local targetRoot = target.Character.HumanoidRootPart
		local desiredPos = targetRoot.Position - (targetRoot.CFrame.LookVector * followDistance)
		root.CFrame = CFrame.new(desiredPos, targetRoot.Position)
	end)
end

-- Button click event
StartButton.MouseButton1Click:Connect(function()
	local value = tonumber(DistanceBox.Text)
	if value then
		followDistance = value
	else
		followDistance = 8
	end

	Frame.Visible = false -- hide UI when following starts
	startFollowing()
end)
